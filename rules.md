# Rule Catalog

本ドキュメントは、qsay v0.3.0 が使用する全34検出ルール（Web実装分）の一覧と、
その設計意図をまとめたものである。

qsay のルールはすべて以下の原則に従う：

- 意味を解釈しない
- 正規表現・文字列操作・形態素解析で検出できる
- なぜ違和感を生むかを説明できる
- 単独では断定的にならない

---

## Visual 系ルール（13ルール）

体裁・レイアウト・記号使いなど、**一目で視認できる癖**を検出する。

---

### DR-16 箇条書き直前の「：」

**概要**
箇条書きの直前が「：」で終わっている構文。

**理由**
英語の "the following:" 構文の直輸入であり、日本語では不自然に見える。

**検出**
正規表現による行末「：」＋次行リスト記号（-・*・数字・絵文字）。

**校正** ✓ 自動修正
「：」を「。」に置換する。

---

### DR-17 箇条書き行頭の絵文字

**概要**
箇条書き項目の先頭に意味ラベルとして絵文字が使われている。

**理由**
視認性最適化の結果であり、人間の自然文では過剰になりやすい。

**検出**
行頭のUnicode絵文字範囲（U+1F300〜U+1FAFF, U+2300〜U+27BF）。

**校正** ✓ 自動修正（全削除）
絵文字を「- 」に置換する。上限なし・Global Cap 外で全箇所を修正する。

---

### DR-18 引用文の単独行化

**概要**
「」で囲まれた引用文が、前後の文脈と切り離され単独行になっている。

**理由**
テンプレート的引用であり、文章の流れを分断する。

**検出**
行全体が `「...」` のみで構成されている行。

**校正** ✓ 自動修正
前後の行と結合する。

---

### DR-20 「以下の〜」の過剰使用

**概要**
「以下の通り」「以下の点」「以下では」などが短い範囲で繰り返される。

**理由**
英語構文の翻訳癖であり、日本語では冗長に見える。

**検出**
「以下の」「以下に」「以下では」等6パターンの出現回数。

**校正** ✓ 自動修正
2回目以降の「以下の」を削除する。

---

### DR-21 箇条書き項目数が3〜5に偏る

**概要**
箇条書きブロックの項目数が、すべて3〜5個の範囲に収まっている。

**理由**
AIは「3つのポイント」「5つの方法」のように適度な個数に揃えやすい。
人間文では2個や7個以上のリストも自然に現れる。

**検出**
リストブロックごとの項目数を集計し、3〜5個ブロックの割合を算出。

---

### DR-22 箇条書き文末表現の完全一致

**概要**
箇条書き項目の文末がすべて同一の語尾で終わっている。

**理由**
均質生成の痕跡であり、人間文では自然に揺れが生じる。

**検出**
3項目以上のリストブロックで文末1文字の完全一致を判定。

**校正** ✓ 自動修正
最後の項目の文末を変化させる（例：「〜る」→「〜ることがある」）。

---

### DR-23 教科書的な太字強調

**概要**
Markdown の `**太字**` が多数の段落にわたって規則的に使われている。

**理由**
説明資料最適化の結果であり、自然文では強調が散発する。

**検出**
`**...**` の出現数と、太字を含む段落の割合。

**校正** ✓ 自動修正
3箇所目以降の太字を1つおきに解除する。

---

### DR-24 段落構造の過度な均一性

**概要**
段落長が極端に揃っている。

**理由**
意味単位のみで分割された文章は、呼吸や迷いが見えにくい。

**検出**
段落長の変動係数（CV）が閾値未満。

---

### DR-25 導入＋結語のテンプレート

**概要**
冒頭に「この記事では」「今回は」、末尾に「いかがでしたか」「ぜひ参考に」のような定型表現が両立している。

**理由**
ブログ記事テンプレートの典型であり、テンプレート感を強く与える。

**検出**
導入テンプレート14語・結語テンプレート13語との照合。

---

### DR-26 見出し構造が均一すぎる

**概要**
Markdown の見出し（`#`〜`####`）の文字数が揃いすぎている。

**理由**
人間文では見出しの長さにばらつきが自然に生じる。

**検出**
見出し文字数の変動係数。3見出し以上が対象。

---

### DR-27 括弧内注釈の過剰使用

**概要**
（）で囲まれた注釈が文中に高頻度で出現する。

**理由**
補足情報を括弧に押し込む書き方は、テンプレート的に見える。

**検出**
全角括弧 `（...）` の文あたり出現密度。

---

### DR-28 「〜とは」定義文の反復

**概要**
「〜とは、...」の定義構文が繰り返される。

**理由**
辞書的・教科書的な導入が連続すると機械的に見える。

**検出**
「とは、」「とは〜」パターンの出現回数。

---

### DR-29 箇条書き＋要約文の反復構造

**概要**
箇条書きブロックの直後に「まとめると」「以上」「これら」で始まる要約文が続く。

**理由**
「列挙→まとめ」の構造が繰り返されるとテンプレート感が強まる。

**検出**
リストブロック終了後3行以内の要約表現。

---

## Structural 系ルール（17ルール）

構造・文体・語彙・リズムなど、**読んで初めて分かる癖**を検出する。

---

### DR-02 文長の均一性

**概要**
文の長さが均一すぎる。

**理由**
人間文では短文と長文が混在するのが自然。均一な文長は機械的な印象を与える。

**検出**
文長の変動係数（CV）。4文以上が対象。

---

### DR-04 定型接続語の高密度使用

**概要**
「しかし」「また」「さらに」「したがって」等の定型接続語が高頻度で出現する。

**理由**
AI生成文は接続語で論理構造を明示しすぎる傾向がある。

**検出**
18種の定型接続語リストとの照合。文あたり密度を算出。

---

### DR-05 文末表現の単調さ

**概要**
文末の語尾パターンが繰り返される。

**理由**
同じ語尾の連続は単調さを生む。人間文では体言止めや疑問形を自然に混ぜる。

**検出**
文末4文字のユニーク率。3文以上が対象。

---

### DR-07 抽象名詞の高密度使用

**概要**
「重要性」「可能性」「アプローチ」「プロセス」等の抽象名詞が集中している。

**理由**
具体性を欠く抽象語の多用は、内容の薄さや翻訳調の印象を与える。

**検出**
34語の抽象名詞リストとの照合。文あたり密度を算出。

---

### DR-09 思考の痕跡の欠如

**概要**
迷い・自問・言い直し・体感を示す表現がない。

**理由**
人間の文章には「かもしれない」「というか」「正直」「ふと」のような思考の痕跡が自然に混じる。これが皆無の文章は機械的に見える。

**検出**
32種の痕跡表現リストとの照合。文あたり含有率。5文以上が対象。

---

### DR-10 受身表現の偏り

**概要**
「〜されている」「〜られます」等の受身表現が多用されている。

**理由**
能動表現の少なさは翻訳調の文体を示す。

**検出**
8種の受身パターンの文あたり密度。

---

### DR-11 指示語の不自然な少なさ

**概要**
「これ」「その」「ここ」「こんな」等の指示語がほとんど使われていない。

**理由**
人間の文章は前文を受けて指示語で繋ぐのが自然。指示語の欠如は各文が独立して生成された痕跡を示す。

**検出**
16種の指示語リストとの照合。文あたり含有率。5文以上が対象。

---

### DR-12 漢語率の異常な高さ

**概要**
文字数に占める漢字の割合が高すぎる。

**理由**
漢語偏重はフォーマル・硬直な印象を与え、AI生成文に特徴的な傾向がある。

**検出**
漢字文字数 / 全文字数（空白除外）の比率。50文字以上が対象。

---

### DR-30 名詞/動詞比の異常な高さ

**概要**
名詞が多く動詞が少ない。

**理由**
AI生成文は名詞偏重になりやすい。人間は動詞で語る傾向がある。

**検出**
形態素解析による名詞数/動詞数の比率。

---

### DR-31 内容語多様性の低さ

**概要**
同じ内容語が繰り返し使われている。

**理由**
語彙の反復はテンプレート感を生む。

**検出**
形態素解析によるType-Token Ratio（TTR）。

---

### DR-32 漢語複合語の連鎖

**概要**
「効率的時間管理手法活用」のように漢語複合語が連鎖している。

**理由**
硬直した印象を与え、翻訳調に見える。

**検出**
形態素解析で漢語複合語が3語以上連続する箇所。

---

### DR-33 文間の語彙重複パターン

**概要**
隣接する文が同じ内容語を高頻度で共有している。

**理由**
テンプレート的な「言い換え・繰り返し」構造に見える。

**検出**
形態素解析による隣接文間のJaccard類似度平均。

---

### DR-34 カタカナビジネス用語の集中

**概要**
「アプローチ」「ソリューション」「パフォーマンス」「エコシステム」等のカタカナビジネス用語が高密度で出現する。

**理由**
翻訳調・コンサル調の硬い印象を与える。

**検出**
40語のカタカナ語リストとの照合。文あたり密度。3文以上が対象。

---

### DR-35 列挙マーカーの機械的使用

**概要**
「第一に」「第二に」「第三に」のような列挙マーカーが使われている。

**理由**
人間の自然な文章では稀であり、機械的な構造化を示す。

**検出**
21種の列挙マーカーリスト（第一に/1つ目/1点目等）との照合。

---

### DR-36 文頭パターンの反復

**概要**
同じ語で文が始まる反復パターン。「また、…また、…また、…」等。

**理由**
機械的な生成を強く示唆する。

**検出**
文頭8文字以内の接続詞・副詞を抽出し、最頻出パターンの占有率を算出。5文以上が対象。

---

### DR-37 名詞化冗長表現

**概要**
「検討を行う」「改善を図る」「向上を推進する」のような動詞の名詞化＋汎用動詞。

**理由**
官僚的・翻訳調の硬い文体を示す。「検討する」で十分なところを冗長にしている。

**検出**
17種の名詞化パターン（正規表現）の文あたり密度。

---

### DR-38 冗長定型句

**概要**
「〜することが可能です」「〜という観点から」「〜に寄与する」等の冗長な定型句。

**理由**
情報密度を下げ、AI生成文に特徴的な印象を与える。

**検出**
21種の冗長定型句リストとの照合。文あたり密度。

---

### DR-39 文体混在（です/ます × だ/である）

**概要**
です/ます調とだ/である調が同一文書内で混在している。

**理由**
文体の不統一は推敲不足の印象を与える。AI生成文は指示によって文体が揺れやすい。

**検出**
文末パターンを正規表現で「です/ます系」「だ/である系」に分類し、少数派の比率を算出。4文以上が対象。

**校正** ✓ 自動修正（全修正）
多数派の文体に統一する。Global Cap 外。

---

### DR-40 思考保留表現の多用

**概要**
「と考えられる」「と思われる」「と言えるだろう」等の思考保留表現が高密度で出現する。

**理由**
断定を避けすぎると歯切れが悪く、AI生成文に特徴的な「慎重すぎる」印象を与える。

**検出**
15種の保留表現リストとの照合。文あたり密度。

---

### DR-41 強調語の過密

**概要**
「極めて」「非常に」「大変」「きわめて」等の強調副詞が集中している。

**理由**
強調語の連続は情報の平坦化を招き、何も強調されていない印象を与える。

**検出**
13種の強調副詞リストとの照合。文書全体の出現回数。

**校正** ✓ 自動修正
3個目以降の強調語を削除する。上限3件。

---

### DR-42 視点（人称）の混在

**概要**
1人称（我々、弊社、筆者）と2人称（あなた、皆様、貴社）が同一文書に混在している。

**理由**
視点の混在は文書の立場を不明確にし、テンプレート結合の痕跡を示す。

**検出**
1人称語8語・2人称語6語のリストとの照合。両方が検出された場合に発火。

---

### DR-43 全角半角混在

**概要**
全角英数字（１、Ａ）と半角英数字（1、A）が同一文書に混在している。

**理由**
表記の揺れは校正不足の印象を与える。

**検出**
Unicode 範囲 U+FF10〜U+FF5A（全角英数字）の有無を判定。

**校正** ✓ 自動修正（全修正）
全角英数字を半角に統一する。Global Cap 外。

---

### DR-44 数字表記の揺れ

**概要**
算用数字（3つ）と漢数字（三つ）が同一の助数詞に対して混在している。

**理由**
表記の不統一は推敲不足の印象を与える。

**検出**
「数字＋助数詞」パターンを算用/漢数字別に抽出し、両方が存在する場合に発火。

---

### DR-45 記号混在

**概要**
同種の記号が異なるUnicode文字で混在している。

**理由**
入力環境の違いによる表記揺れで、校正不足を示す。

**検出**
- 波ダッシュ（〜 U+301C）とチルダ（～ U+FF5E）
- 三点リーダ（… U+2026）とピリオド連続（...）

**校正** ✓ 自動修正（全修正）
優先記号に統一する（～→〜、...→…）。Global Cap 外。

---

### DR-46 疑問＋断定の不自然な近接

**概要**
疑問文の直後に強い断定文が続く「修辞疑問→即回答」パターン。

**理由**
「なぜ〜だろうか？答えは明白である。」のような構造はテンプレート的に見える。

**検出**
「？」で終わる文の次文に断定表現（は明白、は自明、に他ならない等）があるか判定。

---

## スコアとの関係

各ルールは **単独では断定的な意味を持たない**。

qsay は以下を行うのみである：

- 検出された癖を列挙する
- Visual 系の癖の集中度を **Visual Kuse Score** として示す
- Structural 系の癖の集中度を **Structural Kuse Score** として示す
- なぜ違和感を生むかを説明する

スコアは重み付き平均で算出される。

---

## 校正との関係

### 自動校正（11ルール）

以下のルールは正規表現ベースの自動置換で修正される。

**Global Cap 外（全削除）:**

| ルール | 動作 |
|--------|------|
| RV-17 | 絵文字→「- 」 |
| RV-39 | 文体を多数派に統一 |
| RV-43 | 全角英数字→半角 |
| RV-45 | 記号を統一（～→〜、...→…） |

**Global Cap 内（上限付き）:**

| ルール | 動作 | 上限 |
|--------|------|------|
| RV-16 | 「：」→「。」 | 2件 |
| RV-18 | 引用単独行を前後と結合 | 2件 |
| RV-20 | 「以下の」の2回目以降を削除 | 2件 |
| RV-22 | 箇条書き文末を1箇所変更 | 1件 |
| RV-23 | 太字を1つおきに解除 | 3件 |
| RV-27 | 括弧を外す（3個目以降） | 2件 |
| RV-41 | 強調語を削除（3個目以降） | 3件 |

### 3層制御

| レイヤ | 制御 | 意図 |
|--------|------|------|
| ① Global Cap | 最大8件 | やりすぎ感の防止 |
| ② Per-Rule Cap | ルール別上限 | 同じ癖を全部潰さない |
| ③ Local Cap | 段落あたり2件 | 文章の性格を急変させない |

### プロンプト生成（18パターン）

自動修正が難しいルールについて、AIに投げるための修正プロンプトを生成する。

対象: DR-02, DR-04, DR-05, DR-07, DR-09, DR-11, DR-21, DR-24, DR-25, DR-34, DR-35, DR-36, DR-37, DR-38, DR-40, DR-42, DR-44, DR-46

### 検出のみ（5ルール）

修正指示が文脈依存すぎるため、検出結果の提示のみ行う。

対象: DR-10, DR-12, DR-26, DR-28, DR-29

---

## 注意

本ルール群は **文化的・表記的傾向** を扱うものであり、
文章の質・正確性・価値を評価するものではない。
